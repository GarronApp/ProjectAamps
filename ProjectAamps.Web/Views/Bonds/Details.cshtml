@model AAMPS.Clients.ViewModels.Bonds.BondsViewModel
@{
    ViewBag.Title = "Bond Details";
 }
<style>
    .datepicker {
        z-index: 1151 !important;
    }
    /*.datepicker.dropdown-menu table {
        background-color: #ff0000;
    }*/

</style>

<div class="jumbotron" style="background-color:#fff; margin-top:0px; padding-bottom:10px;margin-top: 20px;">
        <div class="row" style="margin-top: -30px;">
            <button id="btnHome" onclick="window.location.href='@Url.Action("HomePage","Development")'" class="btn btn-primary btn-sm pull-left" type="button" style="margin-top:10px" data-toggle="tooltip" data-placement="top" title="return home"><span class="glyphicon glyphicon-home" aria-hidden="true"></span>&nbsp;HOME</button>
            <button id="btnBack" onclick="window.location.href='@Url.Action("Dashboard","Development")'" class="btn btn-primary btn-sm pull-right" type="button" style="margin-top:10px;margin-bottom:10px" data-toggle="tooltip" data-placement="top" title="return to dashboard"><span class="glyphicon glyphicon-circle-arrow-left" aria-hidden="true"></span>&nbsp;Go Back</button>
        </div>
        <div class="row text-center">
            <fieldset>
                <legend class="well legend-heading"><span class="pull-left">Property Details</span></legend>
                <div class="col-md-12" style="margin-top: 0px;">
                    <table style="width:100%;font-size: 0.96em;margin-top:-10px; margin-bottom:-10px" class="table text-center">
                        <thead>
                            <tr>
                                <td class="dark-orange">Unit Number</td>
                                <td class="dark-orange">Description</td>
                                <td class="text-center dark-orange">Unit Size</td>
                                <td class="dark-orange">Unit Status</td>
                                <td class="text-center dark-orange">Purchase Price</td>
                                <td class="dark-orange">Phase</td>
                                @*<td class="dark-orange">Available Date</td>*@
                            </tr>
                        </thead>
                        <tbody style="font-size:14px;font-weight:200;">
                            <tr>
                                <td>@Model.UnitNumber</td>
                                <td>@Model.DevelopmentDescription</td>
                                <td class="text-center">@Model.UnitSize</td>
                                <td>@Model.UnitStatusID</td>
                                <td class="text-center"><label id="lblUnitPriceIncluding">@Model.UnitPriceIncluding</label></td>
                                <td>@Model.UnitPhase</td>
                                @*<td>@Model.UnitActiveDate.Value.ToString("dd/MM/yyyy")</td>*@
                            </tr>
                        </tbody>
                    </table>
                </div>
            </fieldset>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12">
                        <fieldset>
                            <legend class="well legend-heading">Transaction Details</legend>
                            <table style="width:100%;margin-top:-10px; margin-bottom:20px;font-size: 0.96em" class="table text-center">
                                <thead>
                                    <tr>
                                        <td class="col-md-3 dark-orange">Contract Signed</td>
                                        <td class="col-md-3 dark-orange">Deposit Paid</td>
                                        <td class="col-md-3 dark-orange">Date Paid</td>
                                        <td class="col-md-3 dark-orange">Deposit Amount</td>
                                    </tr>
                                </thead>

                                <tbody style="font-size:15px;font-weight:200;">
                                    <tr>
                                        <td class="col-md-3"><label class="bond-label">@Model.SaleContractSignedPurchaserDt</label></td>
                                        <td class="col-md-3"><label class="bond-label">@Model.DepositPaid</label></td>
                                        <td class="col-md-3"><label class="bond-label">@Model.SalesDepoistPaidDt</label></td>
                                        <td class="col-md-3"><label class="bond-label" id="lblSalesTotalDepositAmount">@Model.SalesTotalDepositAmount</label></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table style="width:100%;margin-top:-10px; margin-bottom:-10px" class="table text-left">
                                <thead>
                                    <tr>
                                        <td class="col-md-3 dark-orange"><strong>Bond Required</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Bond Amount</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Date Applied</strong></td>
                                        @*<td class="col-md-3 dark-orange"><strong>Date Granted</strong></td>*@
                                    </tr>
                                </thead>
                                <tbody style="font-size:14px;font-weight:200;">
                                    <tr>
                                        <td class="col-md-3"><label class="bond-label">@Model.SalesBondRequiredBt</label></td>
                                        <td class="col-md-3"><label class="bond-label" id="lblSaleBondRequiredAmount">@Model.SaleBondRequiredAmount</label></td>
                                        <td class="col-md-3"><label class="bond-label">@Model.SalesBondRequiredDt</label></td>
                                        @* <td class="col-md-3"><label>@Model.SalesBondGrantedDt</label></td>*@
                                    </tr>
                                </tbody>
                            </table>
                        </fieldset>
                    </div>
                </div>
               
            </div>
            <div class="col-md-6">
                <div class="col-md-12">
                    <fieldset>
                        <legend class="well legend-heading">Purchaser Details</legend>
                        <table style="width:100%;margin-top: 0px;" class="table text-left">
                            <tr>
                               
                                <td class="col-md-5"><label id="lblFirstName">Purchaser Details: &nbsp;@Model.IndividualFirstName @Model.IndividualLastName</label></td>
                                <td class="col-md-1"><input type="button" id="btnViewPurchaserDetails" onclick="ShowModalPurchaserDetails()" class=" btn btn-primary pull-left " value="details" /></td>
                            </tr>
                            <tr>
                                <td class="col-md-5"><label id="lblLastName">Individual Name: &nbsp;@Model.IndividualLastName</label></td>
                                <td class="col-md-1"><input type="button" id="BtnViewPurchaserDetails" onclick="ShowModalIndividualDetails()" class=" btn btn-primary pull-left " value="details" /></td>
                            </tr>
                        </table>
                    </fieldset>
                    <input type="text" name="PurchaserID" id="txtPurchaserID" class="hide" />
                    <input type="text" name="IndividualID" id="txtIndividualID" class="hide" />
                </div>
                <div class="col-md-12">
                    <fieldset>
                        <legend class="well legend-heading">Seller Details</legend>
                        <table style="width:100%;margin-top: 0px;" class="table text-left">
                            <tr>
                                <td class="col-md-3">Seller Details:</td>
                                <td class="col-md-3"><label id="lblFirstName">@Model.IndividualFirstName</label></td>
                            </tr>
                            <tr>
                                <td class="col-md-3">Agent Details:</td>
                                <td class="col-md-3"><label id="lblLastName">@Session["CurrentUserFullName"].ToString()</label></td>
                            </tr>
                            
                        </table>
                    </fieldset>
                </div>
            </div>

        </div>
    </div>

<div class="jumbotron" style="background-color:#fff; margin-top:0px; padding-bottom:10px;margin-top: 20px;">
    <div class="row" style="background:#fff">
        <form id="UpdateSalesBondDetailsFrom">
            <fieldset>
                <legend class="well legend-heading"><span class="pull-left">Bond Transactions</span></legend>
                <div class="col-md-12">
                    <input id="hiddenSalesBondClientContactedDt" name="hiddenSalesBondClientContactedDt" type="text" class="hide" />
                    <input id="hiddenSalesBondBondDocsRecDt" name="hiddenSalesBondBondDocsRecDt" type="text" class="hide" />
                    <table style="width:100%;font-size:0.96em" class="table text-left">
                        <thead>
                            <tr>
                                <td class="col-md-3 dark-orange"><strong>Have contacted the Purchaser</strong></td>
                                <td class="col-md-3 dark-orange"><strong>Documents Received</strong></td>
                                <td class="col-md-3 dark-orange"><strong>Bond Account No</strong></td>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="col-md-3">
                                    <div class="col-sm-12">
                                        <input type="checkbox" id="checkClientContacted" class="pull-left" value="">&nbsp;&nbsp;
                                        <input type="text" class="form-control datepicker pull-left height28" style="width: 75%;margin-left: 15px;" disabled="disabled" id="txtSalesBondClientContactedDt" name="SalesBondClientContactedDt" data-date-format="dd/mm/yyyy" placeholder="">
                                    </div>
                                </td>
                                <td class="col-md-3">
                                    <div class="col-sm-12">
                                        <input type="checkbox" id="checkDocumentsRec" class="pull-left" value="">&nbsp;&nbsp;
                                        <input type="text" class="form-control datepicker pull-left height28" style="width: 75%;margin-left: 15px;" disabled="disabled" id="txtSalesBondBondDocsRecDt" name="SalesBondBondDocsRecDt" data-date-format="dd/mm/yyyy" placeholder="">
                                    </div>

                                </td>
                                <td class="col-md-3">
                                    <div class="col-sm-12">
                                        <input type="text" class="form-control height28" id="txtSalesBondAccountNo" style="width: 75%" name="salesbondaccountno" placeholder="">
                                    </div>
                                </td>
                                <td class="col-md-3">
                                    <div class="col-sm-12">
                                        <input type="button" id="btnUpdateSalesBondDetails" class="btn btn-primary pull-left " value="Update" />
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                       
                    </table>
                </div>
            </fieldset>
        </form>
        <div class="col-md-12">
            <input type="button" id="btnAddBankApplication" onclick="showNewBankApplicationModal();" class="btn btn-primary text-center" value="Submit Loan to Bank" />
            <br /><br />
            <input type="text" class="hide" id="hasClientAccepted" />
            <table style="width: 100%; font-size: 0.96em;" class="table table-hover text-left" id="tableBondApplications">
                <thead>
                    <tr>
                        <td class="col-md-1 dark-orange">Bank</td>
                        <td class="col-md-1 dark-orange">Status</td>
                        <td class="col-md-1 dark-orange">Amount</td>
                        <td class="col-md-1 dark-orange">Rate</td>
                        <td class="col-md-1 dark-orange">Submitted</td>
                        <td class="col-md-1 dark-orange">AIP</td>
                        <td class="col-md-1 dark-orange">Granted</td>
                        <td class="col-md-1 dark-orange">Client Accepted</td>
                    </tr>
                </thead>
                @foreach (var item in Model.Orginators)
                {
                    <tbody>
                        <tr onclick="showModalUpdateOriginator(@item.OriginatorTrID)">
                            <td class="col-md-1"><label class="bond-label">@item.BankName</label></td>
                            <td class="col-md-1"><label class="bond-label">@item.MOStatus</label></td>
                            <td class="col-md-1"><label class="bond-label" id="lblOriginatorTrBondAmount">@item.OriginatorTrBondAmount</label></td>
                            <td class="col-md-1"><label class="bond-label" id="lblOriginatorTrIntRate">@item.OriginatorTrIntRate %</label></td>
                            <td class="col-md-1"><label class="bond-label">@item.OriginatorTrSubmittedDt</label></td>
                            <td class="col-md-1"><label class="bond-label">@item.OriginatorTrAIPDt</label></td>
                            <td class="col-md-1"><label class="bond-label">@item.OriginatorTrGrantDt</label></td>
                            <td class="col-md-1"><label class="bond-label" id="txtClientAcceptedInfo">@item.OriginatorTrAcceptDt</label></td>
                        </tr>
                    </tbody>
                }
            </table>
        </div>
    </div>

    <div class="modal fade" id="showModalUpdateOriginator" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <form id="OriginatorDetailsForm">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" onclick="window.location.href='@Url.Action("Dashboard","Development")'"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="modalEdit">Details</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div>
                                    <input type="text" name="ApplicationStatus" id="ApplicationStatus" style="display:none" />
                                    <input type="text" name="OriginatorTrID" id="txtOriginatorTrID" style="display:none" />
                                    <input type="text" name="BankID" id="BankID" value=" " style="display:none" />
                                    <input type="text" name="MOStatusID" id="MOStatusID" value="" style="display:none" />
                                    <input type="text" name="InitialBondAmount" id="txtHiddenInitialBondAmount" style="display:none" />
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="selectBankName" class="col-sm-4 control-label">Bank Name</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="selectBankName" name="BankName"></select>
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="selectMOStatus" class="col-sm-4 control-label">Status</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="selectMOStatus" name="MOStatus" disabled="disabled"></select>
                                    </div>
                                </div>

                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtExpiryDate" class="col-sm-4 control-label">Bond Amount</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtOriginatorTrBondAmount" name="OriginatorTrBondAmount" placeholder="">
                                    </div>
                                </div>

                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtExpiryDate" class="col-sm-4 control-label">Rate</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtOriginatorTrIntRate" name="OriginatorTrIntRate" placeholder="">
                                    </div>
                                </div>

                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtExtentionDate" class="col-sm-4 control-label">Submitted</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control datepicker" id="OriginatorTrSubmittedDt" name="OriginatorTrSubmittedDt" data-date-format="dd/mm/yyyy" placeholder="">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtExtentionDate" class="col-sm-4 control-label">AIP</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control datepicker" id="OriginatorTrAIPDt" name="OriginatorTrAIPDt" data-date-format="dd/mm/yyyy" placeholder="">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtExtentionDate" class="col-sm-4 control-label">Granted</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control datepicker" id="OriginatorTrGrantDt" name="OriginatorTrGrantDt" data-date-format="dd/mm/yyyy" placeholder="">
                                    </div>
                                </div>
                                <div class="form-group hide" style="padding-bottom:30px" id="divGrantedApplicationBondNumber">
                                    <label for="txtGrantedBondApplicationNumber" class="col-sm-4 control-label">Bond Application No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtGrantedBondApplicationNumber" name="SalesBondAccountNo" placeholder="enter bond application number">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtExtentionDate" class="col-sm-4 control-label">Client Accepted</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control datepicker" id="OriginatorTrAcceptDt" name="OriginatorTrAcceptDt" data-date-format="dd/mm/yyyy" placeholder="">
                                    </div>
                                </div>

                                <div class="form-group hide" style="padding-bottom:30px" id="divApplicationBondNumber">
                                    <label for="txtBondApplicationNumber" class="col-sm-4 control-label">Confirm Application No</label>
                                    <div class="col-sm-1">
                                        <input type="checkbox" class="form-control" id="checkConfirmBondApplicationNumber">
                                    </div>
                                    <div class="col-sm-7">
                                        <input type="text" class="form-control" id="txtBondApplicationNumber" name="SalesBondAccountNo" placeholder="enter bond application number">
                                    </div>
                                    
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="button" id="btnUpdateOriginatorTr" onclick="UpdateOriginatorTr();" class="btn btn-primary" value="Update" />
                        <input type="button" class="btn btn-primary" data-dismiss="modal" value="Cancel" />
                    </div>

                </div>
            </div>
        </form>
    </div>

    <div class="modal fade" id="showModalPurchaserDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <form id="ViewPurchaserDetailsForm">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="modalEdit">Purchaser Information</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                            
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="selectPurchaserType" class="col-sm-4 control-label">Purchaser Type</label>
                                    <div class="col-sm-8">
                                        <select class="form-control" id="selectPurchaserType" name="EntityTypeID" disabled="disabled"></select>
                                    </div>
                                </div>

                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtFirstName" class="col-sm-4 control-label">Purchaser</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserDescription" name="PurchaserDescription" disabled="disabled" placeholder="purchaser">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtLastName" class="col-sm-4 control-label">Contact Person</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserContactPerson" name="PurchaserContactPerson" disabled="disabled" placeholder="contact person">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtCellNumber" class="col-sm-4 control-label">Cell No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserContactCell" name="PurchaserContactCell" disabled="disabled" placeholder="cell number">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtWorkNumber" class="col-sm-4 control-label">Home No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserContactHome" name="PurchaserContactHome" disabled="disabled" placeholder="home number">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtEmail" class="col-sm-4 control-label">Work No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserContactWork" name="PurchaserContactWork" disabled="disabled" placeholder="work number">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtEmail" class="col-sm-4 control-label">Email Address</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserEmail" name="PurchaserEmail" disabled="disabled" placeholder="email address">
                                    </div>
                                </div>
                               
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtEmail" class="col-sm-4 control-label">Address</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserAddress" name="PurchaserAddress" disabled="disabled" placeholder="address">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label class="col-sm-4 control-label">&nbsp;</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserAddress1" name="PurchaserAddress1" disabled="disabled" placeholder="address 1">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label class="col-sm-4 control-label">&nbsp;</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserAddress2" name="PurchaserAddress2" disabled="disabled" placeholder="address 2">
                                    </div>
                                </div>

                                <div class="form-group" style="padding-bottom:30px">
                                    <label class="col-sm-4 control-label">&nbsp;</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserAddress3" name="PurchaserAddress3" disabled="disabled" placeholder="address 3">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label class="col-sm-4 control-label">&nbsp;</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserSuburb" name="PurchaserSuburb" disabled="disabled" placeholder="suburb">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label class="col-sm-4 control-label">&nbsp;</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtPurchaserPostalCode" name="PurchaserPostalCode" disabled="disabled" placeholder="postal code">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn btn-primary" data-dismiss="modal" value="Cancel" />
                    </div>

                </div>
            </div>
        </form>
    </div>

    <div class="modal fade" id="showModalIndividualDetails" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <form id="ViewIndividualDetailsForm">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="modalEdit">Individual Information</h4>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtFirstName" class="col-sm-4 control-label">First Name</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtFirstName" name="IndividualName" placeholder="first name">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtLastName" class="col-sm-4 control-label">Last Name</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtLastName" name="IndividualSurname" placeholder="last name">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtCellNumber" class="col-sm-4 control-label">Cell No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control cellphone" id="txtCellNumber" name="IndividualContactCell" placeholder="cell number">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtWorkNumber" class="col-sm-4 control-label">Work No</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control workphone" id="txtWorkNumber" name="IndividualContactWork" placeholder="work number">
                                    </div>
                                </div>
                                <div class="form-group" style="padding-bottom:30px">
                                    <label for="txtEmail" class="col-sm-4 control-label">Email Address</label>
                                    <div class="col-sm-8">
                                        <input type="text" class="form-control" id="txtEmail" name="IndividualEmail" placeholder="email address">
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn btn-primary" data-dismiss="modal" value="Cancel" />
                    </div>

                </div>
            </div>
        </form>
    </div>

    </div>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/moment.js"></script>
    <script src="~/Scripts/app/bonds/bonds.js"></script>
    <script type="text/javascript">
        function showModalUpdateOriginator(id) {
            var clientInfo = $("#hasClientAccepted").val();
            if(clientInfo != 1)
            {
                var bonds = new Bonds();
                $('#txtOriginatorTrID').attr('value', id);
                $("#btnUpdateOriginatorTr").val("Update");
                $("#ApplicationStatus").val("UpdateApplication");
                $("#divApplicationBondNumber").addClass("hide");
                bonds.showModalUpdateOriginator(id);
            }
        }

        function UpdateOriginatorTr() {

            $("#txtGrantedBondApplicationNumber").prop("disabled",false);
            var isGrantedDisabled = $("#OriginatorTrGrantDt").is(':disabled');

            if(!isGrantedDisabled){
                var clientGranted = $("#OriginatorTrGrantDt").val();
                if(clientGranted)
                {
                    $("#divGrantedApplicationBondNumber").removeClass("hide");
                    var applicationBondNumber = $("#txtGrantedBondApplicationNumber").val();
                    
                    if(applicationBondNumber)
                    {
                        var bonds = new Bonds();
                        bonds.SaveUpdateOrginator()
                    }
                }
                else
                {
                    $("#OriginatorTrGrantDt").prop("disabled",false);
                }
            }

            var isDisabled = $("#OriginatorTrAcceptDt").is(':disabled');
            if (!isDisabled && isGrantedDisabled) {
                var clientAccepted = $("#OriginatorTrAcceptDt").val();
                if(clientAccepted)
                {
                    $("#divApplicationBondNumber").removeClass("hide");
                    $("#txtBondApplicationNumber").val($("#txtSalesBondAccountNo").val());
                    var applicationBondNumber = $("#txtBondApplicationNumber").val();
                    $("#txtGrantedBondApplicationNumber").prop("disabled",true);
                    
                    if(applicationBondNumber && $("#checkConfirmBondApplicationNumber").is(":checked"))
                    {
                        var bonds = new Bonds();
                        bonds.SaveUpdateOrginator()
                    }
                    else{
                        $("#OriginatorTrAcceptDt").prop("disabled",false);
                    }
                }
            }
            else
            {
                if($("#divGrantedApplicationBondNumber").hasClass("hide"))
                {
                    var bonds = new Bonds();
                    bonds.SaveUpdateOrginator();
                }
            }

        }

        function showNewBankApplicationModal() {

            var clientInfo = $("#hasClientAccepted").val();
            if(clientInfo != 1)
            {
                $('#OriginatorDetailsForm')[0].reset();
               
                $("#showModalUpdateOriginator").modal('show');
                $("#btnUpdateOriginatorTr").val("Submit");
                $("#ApplicationStatus").val("NewApplication");
                $("#txtOriginatorTrBondAmount").val($("#txtHiddenInitialBondAmount").val());
                $("#divApplicationBondNumber").addClass("hide");

                var dateToday = new Date();
                var convertDateToday = moment(dateToday, 'DD/MM/YYYY').format('DD/MM/YYYY');
                $("#OriginatorTrSubmittedDt").datepicker("setValue", convertDateToday);

                $("#selectBankName").prop('disabled', false);
                $("#OriginatorTrSubmittedDt").prop('disabled', false);
                $("#OriginatorTrAIPDt").prop('disabled', false);
                $("#OriginatorTrGrantDt").prop('disabled', false);
                $("#OriginatorTrAcceptDt").prop('disabled', false);

                $("#OriginatorTrAIPDt").prop('disabled', true);
                $("#OriginatorTrGrantDt").prop('disabled', true);
                $("#OriginatorTrAcceptDt").prop('disabled', true);
                $("#selectMOStatus select").attr('disabled', 'disabled');
                $("#selectMOStatus select option").attr('disabled', 'disabled');
                $("#selectMOStatus select option").prop('disabled', true);


                $('#selectMOStatus')
                    .empty()
                    .append('<option selected="selected" value="0">AS SUBMITTED</option>')
                ;
            }

        }

        function ShowModalPurchaserDetails()
        {
            var bonds = new Bonds();
            var id = $('#txtPurchaserID').val();
            bonds.showModalPurchaserDetails(id);
        }

        function ShowModalIndividualDetails()
        {
            var bonds = new Bonds();
            var id = $('#txtIndividualID').val();
            bonds.showModalIndividualDetails(id);
        }

        function formatNumber(num) {
            return "R " + num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
        }
        function FormatSummaryTotalsCurrency() {
            $("#lblUnitPriceIncluding").html(formatNumber($("#lblUnitPriceIncluding").html()));
            $("#lblSalesTotalDepositAmount").html(formatNumber($("#lblSalesTotalDepositAmount").html()));
            $("#lblSaleBondRequiredAmount").html(formatNumber($("#lblSaleBondRequiredAmount").html()));


            $("table#tableBondApplications > tbody > tr").each(function () {
                $(this).find('td:eq(2)').html(formatNumber($("#lblOriginatorTrBondAmount").html()));
            });


        }
    </script>
    <script type="text/javascript">
        $(function () {
            $("#developmentLogo").removeClass('hide');
            $("#developmentLogo").attr("src", '@Url.Content("~/Images/" + Session["DevelopmentImage"].ToString())');
            FormatSummaryTotalsCurrency();
            var bonds = new Bonds();
            bonds.load();

        });
    </script>

