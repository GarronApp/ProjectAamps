@model AAMPS.Clients.ViewModels.Bonds.BondsViewModel
@{
    ViewBag.Title = "Details";
}
<style>
    .datepicker {
        z-index: 1151 !important;
    }
    /*.datepicker.dropdown-menu table {
        background-color: #ff0000;
    }*/

</style>

<div class="jumbotron" style="background-color:#fff; margin-top:0px; padding-bottom:10px;margin-top: 20px;">
        <div class="row pull-right" style="margin-top: -30px;">
            <a href="#" class="btn-cancel" style="font-size:0.85em" onclick="window.location.href='@Url.Action("Dashboard","Development")'">RETURN</a>
           
            
        </div>
        <div class="row text-center" style="margin-top: -20px;">
            <fieldset>
                <legend class="well">Property <span style="padding: 55px;">Details</span></legend>
                <div class="col-md-12" style="margin-top: -20px;">
                    <table style="width:100%" class="table text-center table-general">
                        <thead>
                            <tr>
                                <td class="dark-orange">Unit Number</td>
                                <td class="dark-orange">Description</td>
                                <td class="text-center dark-orange">Unit Size</td>
                                <td class="dark-orange">Unit Status</td>
                                <td class="text-center dark-orange">Purchase Price</td>
                                <td class="dark-orange">Phase</td>
                                @*<td class="dark-orange">Available Date</td>*@
                            </tr>
                        </thead>
                        <tbody style="font-size:0.9em;font-weight:400;">
                            <tr>
                                <td>@Model.UnitNumber</td>
                                <td>@Model.DevelopmentDescription</td>
                                <td class="text-center">@Model.UnitSize</td>
                                <td>@Model.UnitStatusID</td>
                                <td class="text-center">R @Model.UnitPriceIncluding</td>
                                <td>@Model.UnitPhase</td>
                                @*<td>@Model.UnitActiveDate.Value.ToString("dd/MM/yyyy")</td>*@
                            </tr>
                        </tbody>
                    </table>
                </div>
            </fieldset>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="row">
                    <div class="col-md-12">
                        <fieldset>
                            <legend class="well">Transaction <span style="padding: 75px;">Details</span></legend>
                            <table style="width:100%" class="table text-center">
                                <thead>
                                    <tr>
                                        <td class="col-md-3 dark-orange"><strong>Contract Signed</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Deposit Paid</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Date Paid</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Deposit Amount</strong></td>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td class="col-md-3"><label>@Model.SaleContractSignedPurchaserDt</label></td>
                                        <td class="col-md-3"><label>@Model.DepositPaid</label></td>
                                        <td class="col-md-3"><label>@Model.SalesDepoistPaidDt</label></td>
                                        <td class="col-md-3"><label>@Model.SalesTotalDepositAmount</label></td>
                                    </tr>
                                </tbody>
                            </table>
                            <table style="width:100%" class="table text-left">
                                <thead>
                                    <tr>
                                        <td class="col-md-3 dark-orange"><strong>Bond Required</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Bond Amount</strong></td>
                                        <td class="col-md-3 dark-orange"><strong>Date Applied</strong></td>
                                        @*<td class="col-md-3 dark-orange"><strong>Date Granted</strong></td>*@
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="col-md-3"><label>@Model.SalesBondRequiredBt</label></td>
                                        <td class="col-md-3"><label>R @Model.SaleBondRequiredAmount</label></td>
                                        <td class="col-md-3"><label>@Model.SalesBondRequiredDt</label></td>
                                        @* <td class="col-md-3"><label>@Model.SalesBondGrantedDt</label></td>*@
                                    </tr>
                                </tbody>
                            </table>
                        </fieldset>
                    </div>
                </div>
               
            </div>
            <div class="col-md-6">
                <div class="col-md-12">
                    <fieldset>
                        <legend class="well">Purchaser <span style="padding: 65px;">Details</span></legend>
                        <table style="width:100%;margin-top: 0px;" class="table text-left">
                            <tr>
                                <td class="col-md-3">First Name:</td>
                                <td class="col-md-3"><label id="lblFirstName">@Model.IndividualFirstName</label></td>
                            </tr>
                            <tr>
                                <td class="col-md-3">Last Name:</td>
                                <td class="col-md-3"><label id="lblLastName">@Model.IndividualLastName</label></td>
                            </tr>
                            <tr>
                                <td class="col-md-3">Contact No:</td>
                                <td class="col-md-3"><label id="lblContactNumber">@Model.IndividualCellNo</label></td>
                            </tr>
                            <tr>
                                <td class="col-md-3">Email Address:</td>
                                <td class="col-md-3"><label id="lblEmailAddress">@Model.IndividualEmailAddress</label></td>
                            </tr>
                        </table>
                    </fieldset>
                </div>
            </div>

        </div>
    </div>
    <div class="row" style="background:#fff">
    <form id="UpdateSalesBondDetailsFrom">
        <div class="col-md-12">
            <div><h5 style="font-weight:400">BOND TRANSACTIONS</h5></div>
            <table style="width:100%" class="table text-left table-general">
                <thead>
                    <tr>
                        <td class="col-md-3 dark-orange"><strong>Have contacted the Purchaser</strong></td>
                        <td class="col-md-3 dark-orange"><strong>Documents Received</strong></td>
                        <td class="col-md-3 dark-orange"><strong>Bond Account No</strong></td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="col-md-3">
                            <div class="col-sm-12">
                                <input type="checkbox" id="checkClientContacted" class="pull-left" value="">&nbsp;&nbsp;
                                <input type="text" class="form-control datepicker pull-left height28" style="width: 75%;margin-left: 15px;" disabled="disabled" id="txtSalesBondClientContactedDt" name="SalesBondClientContactedDt" data-date-format="dd/mm/yyyy" placeholder="">
                            </div>
                        </td>
                        <td class="col-md-3">
                            <div class="col-sm-12">
                                <input type="checkbox" id="checkDocumentsRec" class="pull-left" value="">&nbsp;&nbsp;
                                <input type="text" class="form-control datepicker pull-left height28" style="width: 75%;margin-left: 15px;" disabled="disabled" id="txtSalesBondBondDocsRecDt" name="SalesBondBondDocsRecDt" data-date-format="dd/mm/yyyy" placeholder="">
                            </div>

                        </td>
                        <td class="col-md-3">
                            <div class="col-sm-12">
                                <input type="text" class="form-control height28" id="txtSalesBondAccountNo" style="width: 75%" name="salesbondaccountno" placeholder="">
                            </div>
                        </td>
                        <td class="col-md-3">
                            <div class="col-sm-12">
                                <input type="button" id="btnUpdateSalesBondDetails" class="btn btn-primary pull-left " value="Update"  />
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </form>
    <div class="col-md-12">
        <input type="button" id="btnAddBankApplication" onclick="showNewBankApplicationModal();" class="btn btn-primary text-center" value="Submit Loan to Bank"/>
        <br /><br />
        <table style="width:100%" class="table table-hover text-left table-general">
            <thead>
                <tr>
                    <td class="col-md-1 dark-orange"><strong>BANK</strong></td>
                    <td class="col-md-1 dark-orange"><strong>STATUS</strong></td>
                    <td class="col-md-1 dark-orange"><strong>AMOUNT</strong></td>
                    <td class="col-md-1 dark-orange"><strong>RATE</strong></td>
                    <td class="col-md-1 dark-orange"><strong>SUBMITTED</strong></td>
                    <td class="col-md-1 dark-orange"><strong>AIP</strong></td>
                    <td class="col-md-1 dark-orange"><strong>GRANTED</strong></td>
                    <td class="col-md-1 dark-orange"><strong>CLIENT ACCEPTED</strong></td>
                </tr>
            </thead>
            @foreach (var item in Model.Orginators)
            {
                <tbody>
                    <tr onclick="showModalUpdateOriginator(@item.OriginatorTrID)">
                        <td class="col-md-1"><label>@item.BankName</label></td>
                        <td class="col-md-1"><label>@item.MOStatus</label></td>
                        <td class="col-md-1"><label>R @item.OriginatorTrBondAmount</label></td>
                        <td class="col-md-1"><label>@item.OriginatorTrIntRate %</label></td>
                        <td class="col-md-1"><label>@item.OriginatorTrSubmittedDt</label></td>
                        <td class="col-md-1"><label>@item.OriginatorTrAIPDt</label></td>
                        <td class="col-md-1"><label>@item.OriginatorTrGrantDt</label></td>
                        <td class="col-md-1"><label>@item.OriginatorTrAcceptDt</label></td>
                    </tr>
                </tbody>
            }
        </table>
    </div>
 </div>

<div class="modal fade" id="showModalUpdateOriginator" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <form id="OriginatorDetailsForm">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" onclick="window.location.href='@Url.Action("Dashboard","Development")'"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="modalEdit">Details</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <div>
                                <input type="text" name="ApplicationStatus" id="ApplicationStatus" style="display:none" />
                                <input type="text" name="OriginatorTrID" id="txtOriginatorTrID" style="display:none" />
                                <input type="text" name="BankID" id="BankID" value=" " style="display:none" />
                                <input type="text" name="MOStatusID" id="MOStatusID" value="" style="display:none" />
                                @*<input type="text" name="OriginatorTrBondAmount" id="txtHiddenOriginatorTrBondAmount" value="" style="display:none" />*@
                            </div>
                            <div class="form-group" style="padding-bottom:30px">
                                <label for="selectBankName" class="col-sm-4 control-label">Bank Name</label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="selectBankName" name="BankName"></select>
                                </div>
                            </div>
                            <div class="form-group" style="padding-bottom:30px">
                                <label for="selectMOStatus" class="col-sm-4 control-label">Status</label>
                                <div class="col-sm-8">
                                    <select class="form-control" id="selectMOStatus" name="MOStatus" disabled="disabled"></select>
                                </div>
                            </div>

                            <div class="form-group" style="padding-bottom:30px">
                                <label for="txtExpiryDate" class="col-sm-4 control-label">Bond Amount</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="txtOriginatorTrBondAmount" name="OriginatorTrBondAmount" placeholder="">
                                </div>
                            </div>

                            <div class="form-group" style="padding-bottom:30px">
                                <label for="txtExpiryDate" class="col-sm-4 control-label">Rate</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control" id="txtOriginatorTrIntRate" name="OriginatorTrIntRate" placeholder="">
                                </div>
                            </div>

                            <div class="form-group" style="padding-bottom:30px">
                                <label for="txtExtentionDate" class="col-sm-4 control-label">Submitted</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control datepicker" id="OriginatorTrSubmittedDt" name="OriginatorTrSubmittedDt" data-date-format="dd/mm/yyyy" placeholder="">
                                </div>
                            </div>
                            <div class="form-group" style="padding-bottom:30px">
                                <label for="txtExtentionDate" class="col-sm-4 control-label">AIP</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control datepicker" id="OriginatorTrAIPDt" name="OriginatorTrAIPDt" data-date-format="dd/mm/yyyy" placeholder="">
                                </div>
                            </div>
                            <div class="form-group" style="padding-bottom:30px">
                                <label for="txtExtentionDate" class="col-sm-4 control-label">Granted</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control datepicker" id="OriginatorTrGrantDt" name="OriginatorTrGrantDt" data-date-format="dd/mm/yyyy" placeholder="">
                                </div>
                            </div>
                            <div class="form-group" style="padding-bottom:30px">
                                <label for="txtExtentionDate" class="col-sm-4 control-label">Client Accepted</label>
                                <div class="col-sm-8">
                                    <input type="text" class="form-control datepicker" id="OriginatorTrAcceptDt" name="OriginatorTrAcceptDt" data-date-format="dd/mm/yyyy" placeholder="">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <input type="button" id="btnUpdateOriginatorTr" onclick="UpdateOriginatorTr();" class="btn btn-primary" value="Update"/>
                    <input type="button" class="btn btn-primary" data-dismiss="modal" value="Cancel"/>
                </div>

            </div>
        </div>
    </form>
</div>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/moment.js"></script>
    <script src="~/Scripts/app/bonds/bonds.js"></script>
    <script type="text/javascript">
        function showModalUpdateOriginator(id)
        {  
            var bonds = new Bonds();
            $('#txtOriginatorTrID').attr('value', id);
            $("#btnUpdateOriginatorTr").val("Update");
            $("#ApplicationStatus").val("UpdateApplication");
            bonds.showModalUpdateOriginator(id);
        }
        function UpdateOriginatorTr()
        {  
            var bonds = new Bonds();
            bonds.SaveUpdateOrginator()
        }

        function showNewBankApplicationModal()
        {
            $('#OriginatorDetailsForm')[0].reset();
            $("#showModalUpdateOriginator").modal('show');
            $("#btnUpdateOriginatorTr").val("Submit");
            $("#ApplicationStatus").val("NewApplication");
            $("#txtOriginatorTrBondAmount").val()

            var dateToday = new Date();
            var convertDateToday = moment(dateToday, 'DD/MM/YYYY').format('DD/MM/YYYY');
            $("#OriginatorTrSubmittedDt").datepicker("setValue", convertDateToday);

            $("#selectBankName").prop('disabled', false);
            $("#OriginatorTrSubmittedDt").prop('disabled', false);
            $("#OriginatorTrAIPDt").prop('disabled', false);
            $("#OriginatorTrGrantDt").prop('disabled', false);
            $("#OriginatorTrAcceptDt").prop('disabled', false);

            $("#OriginatorTrAIPDt").prop('disabled',true);
            $("#OriginatorTrGrantDt").prop('disabled',true);
            $("#OriginatorTrAcceptDt").prop('disabled',true);
            $("#selectMOStatus select").attr('disabled', 'disabled');
            $("#selectMOStatus select option").attr('disabled', 'disabled');
            $("#selectMOStatus select option").prop('disabled',true);
            

            $('#selectMOStatus')
                .empty()
                .append('<option selected="selected" value="0">AS SUBMITTED</option>')
            ;

        }
    </script>
    <script type="text/javascript">
    $(function () {
        var bonds = new Bonds();
        bonds.load();
        @*var clientContacted = @Model.SalesBondClientContactedBt;
        if(clientContacted == 1)
        {
            $("#checkClientContacted").prop('checked', true);
            $("#checkClientContacted").val(1);
        }
        else{
            $("#checkClientContacted").prop('checked', false);
            $("#checkClientContacted").val(0);
        }

        var bondDocuments = @Model.SalesBondBondDocsRecBt;
        if(bondDocuments == 1)
        {
            $("#checkDocumentsRec").prop('checked', true);
            $("#checkDocumentsRec").val(1);
        }
        else{
            $("#checkDocumentsRec").prop('checked', false);
            $("#checkDocumentsRec").val(0);
        }*@

       

        



    });
</script>

